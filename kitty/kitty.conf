# Kitty Configuration - Complete tmux replacement
# Replicates your tmux workflow with native terminal performance

# ===== FONT CONFIGURATION =====
font_family Monaco
font_size 14.0
adjust_line_height 0
adjust_column_width 0

# ===== THEME - KANAGAWA WAVE =====
# Apply kanagawa wave theme to match your neovim

# Background and foreground
background #1F1F28
foreground #DCD7BA

# Cursor
cursor #C8C093
cursor_text_color #1F1F28

# Selection
selection_background #2D4F67
selection_foreground #C8C093

# URL color
url_color #7FB4CA

# Active/inactive borders
active_border_color #7E9CD8
inactive_border_color #54546D

# Tab colors
active_tab_background #1F1F28
active_tab_foreground #DCD7BA
inactive_tab_background #16161D
inactive_tab_foreground #727169
tab_bar_background #16161D

# 16 ANSI colors
color0 #16161D
color1 #C34043
color2 #76946A
color3 #DCA561
color4 #7E9CD8
color5 #957FB8
color6 #7AA89F
color7 #C8C093
color8 #54546D
color9 #E82424
color10 #98BB6C
color11 #E6C384
color12 #7FB4CA
color13 #938AA9
color14 #7AA89F
color15 #DCD7BA

# ===== WINDOW SETTINGS =====
remember_window_size yes
initial_window_width 1200
initial_window_height 800
window_padding_width 4
placement_strategy center
hide_window_decorations titlebar-only

# Enable all layouts (this is crucial for splits to work on all tabs)
enabled_layouts splits,stack,tall,fat,grid,horizontal,vertical

# Window management settings
confirm_os_window_close 0

# ===== TAB SETTINGS =====
tab_bar_edge bottom
tab_bar_style powerline
tab_powerline_style angled
tab_title_template "{index}: {title}"
active_tab_font_style bold

# ===== MOUSE & SCROLLING =====
mouse_hide_wait 3.0
scroll_lines 3
wheel_scroll_multiplier 5.0
copy_on_select yes

# ===== ALT/OPTION KEY HANDLING =====
# Configure Option key as Alt modifier for applications
# This enables Alt+key combinations to work in Neovim
macos_option_as_alt both
# Alternative options:
# macos_option_as_alt left (only left Option key)
# macos_option_as_alt right (only right Option key)
# macos_option_as_alt both (both Option keys - recommended)

# ===== TMUX-LIKE KEYBINDINGS =====
# Using Ctrl-s as prefix key (like your tmux setup)

# Clear all default keybindings first
clear_all_shortcuts yes

# Essential system bindings
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard
map cmd+q quit

# ===== PREFIX KEY SYSTEM =====
# Ctrl-s followed by another key (tmux-style)

# Split windows (v=horizontal, s=vertical like your tmux)
# Use --type=window to ensure splits work in all tabs
map ctrl+s>v launch --location=vsplit --type=window --cwd=current
map ctrl+s>s launch --location=hsplit --type=window --cwd=current

# Navigate between windows using hjkl (vim-style like your tmux)
map ctrl+s>h neighboring_window left
map ctrl+s>j neighboring_window bottom  
map ctrl+s>k neighboring_window top
map ctrl+s>l neighboring_window right

# Close current window (x like your tmux)
map ctrl+s>x close_window

# Window management - zoom toggle (like tmux zoom)
# Toggle between current layout and stack layout (zoomed view)
map ctrl+s>z toggle_layout stack
map ctrl+s>shift+z next_layout

# Tab management (similar to tmux windows)
map ctrl+s>c new_tab
map ctrl+s>n next_tab
map ctrl+s>p previous_tab

# Jump to specific tabs (ctrl+s + number)
map ctrl+s>1 goto_tab 1
map ctrl+s>2 goto_tab 2
map ctrl+s>3 goto_tab 3
map ctrl+s>4 goto_tab 4
map ctrl+s>5 goto_tab 5
map ctrl+s>6 goto_tab 6
map ctrl+s>7 goto_tab 7
map ctrl+s>8 goto_tab 8
map ctrl+s>9 goto_tab 9

# Rename current tab (ctrl+s + comma)
map ctrl+s>comma set_tab_title

# Reload configuration (r like your tmux)
map ctrl+s>r load_config_file

# ===== QUICK ACCESS BINDINGS (without prefix) =====
# For convenience, also map cmd keys for quick access  
map cmd+d launch --location=vsplit --type=window --cwd=current
map cmd+shift+d launch --location=hsplit --type=window --cwd=current
map cmd+w close_window
map cmd+t new_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# ===== WINDOW RESIZING =====
# Resize windows with Ctrl-s + Shift + hjkl
map ctrl+s>shift+h resize_window narrower 2
map ctrl+s>shift+j resize_window shorter 2
map ctrl+s>shift+k resize_window taller 2
map ctrl+s>shift+l resize_window wider 2

# ===== SCROLLBACK & SEARCH =====
map ctrl+s>slash show_scrollback
map ctrl+s>question search_backwards

# ===== SESSION MANAGEMENT =====
# Save and restore sessions (better than tmux for local work)
map ctrl+s>shift+s save_session /tmp/kitty-session
map ctrl+s>shift+r load_session /tmp/kitty-session

# ===== MISCELLANEOUS =====
# Copy mode equivalent (selection mode)
map ctrl+s>bracket_left show_scrollback

# Font size adjustment
map ctrl+plus change_font_size all +1.0
map ctrl+minus change_font_size all -1.0
map ctrl+0 change_font_size all 0

# ===== ADVANCED FEATURES =====
# Enable shell integration
shell_integration enabled

# Enable remote control (for scripting)
allow_remote_control yes

# Performance settings
repaint_delay 10
input_delay 3
sync_to_monitor yes

# ===== TERMINAL FEATURES =====
# Clipboard integration
clipboard_control write-clipboard write-primary read-clipboard-ask read-primary-ask

# Enable URL detection
detect_urls yes
url_style curly

# ===== KEY HANDLING =====
# Ensure proper handling of modifier keys for applications
# This helps with Alt+key combinations in Neovim
macos_hide_from_tasks no
macos_quit_when_last_window_closed yes

# Additional key handling for better Alt key support
# Send escape sequences for Alt combinations
map alt+l send_text all \x1bl
map alt+j send_text all \x1bj  
map alt+k send_text all \x1bk
map alt+[ send_text all \x1b[
map alt+] send_text all \x1b]
map alt+\ send_text all \x1b\\

# ===== WINDOW BORDERS =====
# Visual window borders like tmux panes
draw_minimal_borders yes
window_border_width 1px
window_margin_width 2

# ===== STARTUP SESSION =====
# Auto-create initial layout similar to your tmux setup
# startup_session session.conf  # Commenting out to prevent interference

# ===== BELL CONFIGURATION =====
enable_audio_bell no
visual_bell_duration 0.0
